/*============================================================================*\

	JavaScript by Brian Sexton for the Williams Sonoma Coding Challenge

	------------------------------------------------------------------------

	Brian Sexton - https://briansexton.com/

	Main Portfolio - https://brian.works/

	Writing Portfolio - https://wellwritten.work/

	Résumé and Supplemental Documents - https://brian.works/resume

	------------------------------------------------------------------------

	Please Note: This is work in progress and not yet feature-complete!

\*============================================================================*/
const FEED_URL="https://bdsexton.github.io/williams-sonoma-coding-challenge/_assets/data/products.json";var productData,fileInputElement=document.getElementById("file-input"),fileInputForm=document.getElementById("file-input-form"),resetButton=document.getElementById("file-input-reset");function clearRawJSON(){document.getElementById("raw-data").textContent=""}function displayRawJSON(e){"string"==typeof e?(console.log("[displayRawJSON] String received. Displaying unaltered."),document.getElementById("raw-data").textContent=e):"object"==typeof e?(console.log("[displayRawJSON] Object received. Displaying stringified version."),document.getElementById("raw-data").textContent=JSON.stringify(e)):document.getElementById("raw-data").textContent="Uh oh! There seems to be a problem with the data, so it could not be displayed. Sorry about that!"}function handleFileInput(e){console.log("[handleFileInput] FileList length: "+e.target.files.length),e.target.files.length>0&&readFile(e.target.files[0])}function isModernBrowser(){return!!(globalThis&&window&&window.fetch)}async function loadFeed(e){try{let t=await fetch(e);if(200===t.status)return console.log("[loadFeed] HTTP Status: 200 OK. Returning JSON."),await t.json();console.log("[loadFeed] Uh oh. The fetch request did not return with the expected HTTP status (200)."),console.log("[loadFeed] HTTP Status: "+t.status),console.log("[loadFeed] HTTP Status Text: "+t.statusText)}catch(e){console.log(e)}}function readFile(e){let t=new FileReader;t.onload=function(e){displayRawJSON(e.target.result)},t.readAsText(e)}isModernBrowser()?(fileInputElement.addEventListener("change",handleFileInput),resetButton.addEventListener("click",()=>{productData=null,clearRawJSON()}),loadFeed(FEED_URL).then(e=>{productData=e,displayRawJSON(e)})):alert("Sorry, but this app requires a modern web browser. Please open it in a recent version of something like Chrome, Firefox, Opera, Edge, or Safari instead.");